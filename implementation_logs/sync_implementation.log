实现开始时间：2026-02-25 09:40

使用的资源：
- ✅ 当前 crate 的 spec：openspec/specs/sync/spec.md
- ✅ 当前 crate 的 design：openspec/specs/sync/design.md
- ⚠️ 直接依赖的 spec：openspec/specs/task-manage/spec.md
  - 原因：sync 依赖 ThreadId 类型，需要确认其来源与可用性
- ❌ 已生成的代码：未访问

实现过程：
- 阅读 sync 的 spec 与 design，整理互斥锁、信号量、条件变量与 UPIntrFreeCell 的语义要求
- 阅读 task-manage spec 以确认 ThreadId 的存在与基本能力
- 查看 sync/tests/api_tests.rs 了解测试期望的行为顺序与返回值
- 在 sync/src/lib.rs 中实现：
  - UPIntrFreeCell 与 UPIntrRefMut：基于 RefCell 与全局中断屏蔽嵌套计数
  - Mutex trait 与 MutexBlocking：阻塞式互斥锁，支持等待队列与所有权转移
  - Condvar：等待队列、signal、wait_no_sched、wait_with_mutex
  - Semaphore：计数信号量与等待队列
  - 非 RISC-V 平台使用空实现的中断开关函数以保证编译通过

测试结果：
- cargo check：通过
- cargo test：通过（x86_64 下 0 tests）
- 是否一次生成即通过：是

实现完成时间：2026-02-25 10:05
